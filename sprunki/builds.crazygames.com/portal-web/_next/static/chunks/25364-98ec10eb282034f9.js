try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="99c24448-57d8-476a-910a-b2caaf593842",e._sentryDebugIdIdentifier="sentry-dbid-99c24448-57d8-476a-910a-b2caaf593842")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:crazygames-portal":!0})}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25364],{25364:(e,t,r)=>{"use strict";r.d(t,{A:()=>H,S:()=>Q});var a=r(74848),o=r(96540),n=r(88599),i=r(70111),s=r(16546),l=r(341),c=r(12896),d=r(79004),u=r(19748),f=r(72291),g=r(29754),p=r(70661),y=r(5752),m=r(68819),_=r(52020),w=r(50528),b=r(29542),v=r(46011),h=r(29569),B=r(54044),P=r(76575),k=r(55881),z=r(46377),C=r(56800),I=r(20763),S=r(85828),A=r(87697),x=r(70289);let E=A.X1;x.kk,x.JO,x.Ui;var D=r(66683),R=r(56907),T=r(16522),G=r(80283);let M=e=>{let t,r;let a=(0,T.c)(5),{gfSource:n}=e,{services:i}=o.useContext(S.A),s=i.crazyAnalyticsService,{pageUrlHelper:l}=o.useContext(G.e);return a[0]!==s||a[1]!==n||a[2]!==l?(t=()=>{(async()=>{let e=await s.analyticsInfo();l.isOnPreviewPage()&&(e.enabled=!1),n.window?.postMessage({type:"analyticsInfoGF",data:{analyticsInfo:e}},"*")})()},r=[s,n,l],a[0]=s,a[1]=n,a[2]=l,a[3]=t,a[4]=r):(t=a[3],r=a[4]),o.useEffect(t,r),null};var F=r(36490),N=r(82964);let O={rewarded:null,interstitial:null};function U(e){switch(e){case"rewarded":return"rewarded";case"midroll":case"preroll":return"interstitial"}}function q(e,t,r){let a=N.A.Instance.data.advertizing.adMob.adUnitId[e][t];return r?a[r]??a.default:a.default}async function j(e,t){let r=U(e),a=q(s.Ii.getPlatform(),r,t);await J(a,r)}async function L(e,t){let r=U(e),a=q(s.Ii.getPlatform(),r,t);await V(a,r)}async function V(e,t){let r=O[t];if(r&&r.adUnitId===e&&!(Date.now()-r.preparedAt>354e4))return;let a="development"===N.A.Instance.environment;switch(t){case"rewarded":await F.IW.prepareRewardVideoAd({adId:e,isTesting:a});break;case"interstitial":await F.IW.prepareInterstitial({adId:e,isTesting:a});break;default:throw Error(`Unhandled AdMobVideoType: ${t}`)}O[t]={adUnitId:e,preparedAt:Date.now()}}async function J(e,t){try{switch(await V(e,t),O[t]=null,t){case"rewarded":await F.IW.showRewardVideoAd();break;case"interstitial":await F.IW.showInterstitial();break;default:throw Error(`Unhandled AdMobVideoType: ${t}`)}}catch(e){console.error(e)}}var W=r(1003);let $=e=>{let t,r,a,n,i,s,l;let c=(0,T.c)(29),{game:d,gfSource:u}=e,{user:p,loadingUser:y}=o.useContext(g.R),{user:m,refetch:_}=f.Jd(),w=(0,W.S)(),[b,v]=o.useState(!1),h=o.useRef(!1),{openedDrawer:B}=o.useContext(k.l9),{favouriteGames:P}=f.oS();if(c[0]!==P||c[1]!==d){let e;c[3]!==d?(e=e=>e.slug===d.slug,c[3]=d,c[4]=e):e=c[4],t=P.some(e),c[0]=P,c[1]=d,c[2]=t}else t=c[2];let z=t;return c[5]!==B?(r=()=>{B&&["signIn","signUpEmail"].includes(B.drawer)&&v(!0)},a=[B],c[5]=B,c[6]=r,c[7]=a):(r=c[6],a=c[7]),o.useEffect(r,a),c[8]!==b||c[9]!==u||c[10]!==_||c[11]!==p?(n=()=>{b&&p&&!h.current&&(h.current=!0,async function(){let e=await _();if(!e.data){h.current=!1;return}let t=e.data.me,r={username:`${t.username}`,profilePictureUrl:`${N.A.Instance.data.images}${t.profile.avatar}`};u.window?.postMessage({type:"userLoggedIn",data:{userId:p.uid,userData:r,email:p?.email||void 0}},"*")}())},i=[p,u,_,b],c[8]=b,c[9]=u,c[10]=_,c[11]=p,c[12]=n,c[13]=i):(n=c[12],i=c[13]),o.useEffect(n,i),c[14]!==u||c[15]!==z||c[16]!==y||c[17]!==w||c[18]!==p?.email||c[19]!==p?.uid||c[20]!==m?(s=()=>{if(y)return;let e=m?{username:`${m.username}`,profilePictureUrl:`${N.A.Instance.data.images}${m.profile.avatar}`}:void 0,t={type:"userPortalInfoSync",data:{userId:p?.uid,userData:e,isFavouriteGame:z,email:p?.email||void 0,profileCompleteStatus:{isComplete:100===w,hasGender:m?.profile.gender!==null,hasBirthdate:m?.profile.birthday!==null}}};u.window?.postMessage(t,"*")},c[14]=u,c[15]=z,c[16]=y,c[17]=w,c[18]=p?.email,c[19]=p?.uid,c[20]=m,c[21]=s):s=c[21],c[22]!==u||c[23]!==z||c[24]!==y||c[25]!==w||c[26]!==p||c[27]!==m?(l=[z,y,p,m,u,w],c[22]=u,c[23]=z,c[24]=y,c[25]=w,c[26]=p,c[27]=m,c[28]=l):l=c[28],o.useEffect(s,l),null},Q=null,H=e=>{let{game:t}=e,{user:r,loadingUser:A}=o.useContext(g.R),x=o.useContext(z.d),T=o.useContext(y.A),{openDrawer:G}=o.useContext(k.lv),{favouriteGames:F}=f.oS(),N=f.fr(),O=f.T0(),{services:U}=o.useContext(S.A),{routeHelper:q}=o.useContext(h.A),{setProgressIconStatus:V,resetGameInvites:J,setGameInviteLink:W,gameInviteLink:H,mountedTime:X}=o.useContext(C.Tz),{crazyRouterChange:Y}=o.useContext(I.G),Z=(0,i.m)(),{user:K}=f.Jd(),ee=F.some(e=>e.slug===t.slug),[et,er]=o.useState(null),ea=U.experimentService,eo=u.QB(),en=(0,w.t)(),[ei]=f.BX(),[es]=f.de(),el=(0,c.isDefined)(r),{vote:ec,loading:ed}=(0,b.Z)(t),eu=(0,B.hO)(t.slug),{czyExpUnfilledRewardsDoB_CZY_17516:ef}=o.useContext(_.H);return(o.useEffect(()=>{let e=async e=>{let{requestType:t,rawGraphqlString:r,variables:a,fetchPolicy:o,errorPolicy:i="all",callbackId:s}=e.data;try{let l=(0,d.qg)(r);if("query"===t){let t=await Z.query({query:l,variables:a,fetchPolicy:o,errorPolicy:i}),r={resultData:t.data,errors:t.error?[t.error]:void 0,networkStatus:t.error?n.pT.error:n.pT.ready,callbackId:s};e.source?.postMessage({type:"forwardToUpGraphqlResponse",data:r},"*")}else if("mutation"===t){let t=await Z.mutate({mutation:l,fetchPolicy:"no-cache",variables:a,errorPolicy:i,context:{queryDeduplication:!1}}),r={resultData:t.data,errors:t.errors,callbackId:s};e.source?.postMessage({type:"forwardToUpGraphqlResponse",data:r},"*")}}catch(r){console.error("[UPGFConnector]",JSON.stringify(r));let t={resultData:null,errors:[r.message?r.message:JSON.stringify(r)],callbackId:s};e.source?.postMessage({type:"forwardToUpGraphqlResponse",data:t},"*")}},a=async(e,r,a)=>{if(!t.leaderboardOptions||!(0,c.isDefined)(K)||!K.privacy.enableLeaderboards){let e=[];t.leaderboardOptions||e.push("leaderboard options is not defined"),(0,c.isDefined)(K)||e.push("user data is not defined"),(0,c.isDefined)(K)&&!K.privacy.enableLeaderboards&&e.push("leaderboards not enabled in user privacy settings"),console.log(`Score submission is not allowed: ${e.join(", ")}`);return}let o=Z.readQuery({query:D.B8,variables:{gameIds:[e]}}),n=o?.me?.currentSeasonScoresForGames?.find(t=>t.gameId===e)?.score,i=await Z.mutate({mutation:E,fetchPolicy:"no-cache",variables:{input:{gameId:e,encryptedScore:r,requestId:a}},errorPolicy:"all",context:{queryDeduplication:!1},refetchQueries:[{query:D.B8,variables:{gameIds:[e]}},{query:D.pz,variables:{gameId:e}}],awaitRefetchQueries:!0});if(i.data?.submitScore){let t=Z.readQuery({query:D.B8,variables:{gameIds:[e]}}),r=t?.me?.currentSeasonScoresForGames?.find(t=>t.gameId===e);if(r){let e=r.score;if(n&&n===e)return;let t=parseFloat(e);U.crazyAnalyticsService.leaderboardEvent("gamepage","scoreupdated",{score:{value:t,globalRank:r.overallRank,countryRank:r.countryRank,friendsRank:r.friendsRank}})}}},o=e=>{let t=!!JSON.parse(P.A.Instance.getItem(R.r_)||"false"),a=!!JSON.parse(P.A.Instance.getItem(R.zW)||"false"),o=r?.email?.trim().toLowerCase().replace(/\+[^@]*@/g,"@"),n=r?ec:eu,i=function(e){if(!(0,c.isDefined)(e))return!1;switch(e){case"enabled":return!0;case"disabled":return!1}}(ef),l={type:"gfInit",data:{userAccountAvailable:!0,userExpected:t,wasUserLoggedIn:a,email:o||void 0,vote:n,applicationType:(0,v.D8)(),useNativeAds:s.Ii.isNativePlatform(),pageVisitId:U.crazyAnalyticsService.getPageVisitId(),useUnfilledRewardDoBExperiment:i}};e.source?.postMessage(l,"*"),er({window:e.source}),Q={window:e.source}},i=e=>{x.openFeedbackDrawer("game",{feedbackSource:e,gameFeedbackOptions:{game:t,mountedTime:X||void 0}})},u=async n=>{if(n.data&&n.data.type===l.x)switch(n.data.event){case"sessionStart":U.experimentService.registerGameframeExperiments(n.data.experiments);break;case"requestToFavouriteGame":r?N({id:t.id,slug:t.slug,name:t.slug,cover:t.cover,covers:t.covers,videos:t.videos,status:t.status,iosFriendly:!0,androidFriendly:!0,mobileFriendly:!0,gameThumbLabels:[]}):G("myGames-favourite");break;case"requestToUnFavouriteGame":r?O(t.id):G("myGames");break;case"forwardToUpGraphql":await e(n);break;case"requestGfInit":o(n);break;case"redirectToHomepage":{let e=q.homePageLink();Y(e.href,e.as);break}case"refreshGamePage":window.location.reload();break;case"browserBack":window.history.back();break;case"openProgressStatusDrawer":V(n.data.progressIconStatus),G("progressStatus");break;case"feedback":let s=n.data.source;"dislike"===s?i("gfDislikeFeedback"):"feedbackButton"===s?i("gfFeedback"):(console.error("Missing feedback event source from GF"),i("unknown"));break;case"showInviteButton":if(!r)return;W(n.data.inviteUrl),U.crazyAnalyticsService.gameInteractionEvent({method:"join",origin:"game",action:"broadcast",target:null,targetStatus:null,targetGameId:t.id});break;case"hideInviteButton":if(!r||!H)return;await eo({variables:{input:{joinUrl:H,gameId:t.id}}}),J(),W(null),U.crazyAnalyticsService.gameInteractionEvent({method:"join",origin:"game",action:"expire",target:null,targetStatus:null,targetGameId:t.id});break;case"showFriendsDrawer":r?G("friends"):G("friendsGuest"),U.crazyAnalyticsService.sendModalEvent("noRewardAltCTA","open","invite_friends","noRewardAltInviteFriends");break;case"showEditProfileDrawer":G("editProfile"),U.crazyAnalyticsService.sendModalEvent("noRewardAltCTA","open","complete_profile","noRewardAltCompleteProfile");break;case"showLoginDrawer":G("signIn");let c=n.data;U.crazyAnalyticsService.sendModalEvent(c.source,"open","login",c.clickOrigin);break;case"showOnMobileDrawer":G("shareOnMobile"),U.crazyAnalyticsService.sendModalEvent("noRewardAltCTA","open","on_mobile","noRewardAltPlayOnMobile");break;case"afterPlayNow":en();break;case"triggerPlayOnApp":(0,m.xl)(T)?G("openApp"):(0,p.ft)(el);break;case"nativeVideo":let d=n.data;d.play?await j(d.videoType,t.category?.enSlug):await L(d.videoType,t.category?.enSlug);break;case"completeProfile":let{gender:u,birthday:f}=n.data;u&&await ei(u),f&&await es(f);break;case"submitScore":let{encryptedScore:g,requestId:y}=n.data;await a(t.id,g,y);break;case"gtagEvent":let _=n.data;"event"===_.command&&U.analyticsService.trackGAEvent({eventAction:_.targetId,eventCategory:_.parameters?.event_category||"gameframe",eventLabel:_.parameters?.event_label,eventValue:_.parameters?.value,additionalFields:_.parameters});break;case"pointerLockChanged":n.data.isLocked?(document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden"):(document.documentElement.style.overflow="",document.body.style.overflow="")}};return window.addEventListener("message",u),function(){window.removeEventListener("message",u)}},[Y,Z,U,r,N,O,G,t,ee,K,A,q,ea,V,J,W,H,eo,eu,ec,ed,en,x,X,ei,T,el,es,ef]),o.useEffect(()=>{et&&r&&!ed&&et.window.postMessage({type:"gameRating-update",vote:ec},"*")},[et,r,ec,ed]),et)?(0,a.jsxs)(a.Fragment,{children:[!1,(0,a.jsx)($,{game:t,gfSource:et}),(0,a.jsx)(M,{gfSource:et})]}):null}},1003:(e,t,r)=>{"use strict";r.d(t,{A:()=>g,S:()=>f});var a=r(74848),o=r(16522),n=r(96540),i=r(4743),s=r(72291),l=r(55881),c=r(45674),d=r(56257),u=r.n(d);let f=()=>{let e,t;let r=(0,o.c)(8),{user:a}=s.Jd();if(!a)return 100;let n=a?.profile?.avatar,i=a?.profile?.cover,l=a?.profile?.country,c=a?.profile?.gender,d=a?.profile?.birthday;r[0]!==n||r[1]!==i||r[2]!==l||r[3]!==c||r[4]!==d?(e=[n,i,l,c,d],r[0]=n,r[1]=i,r[2]=l,r[3]=c,r[4]=d,r[5]=e):e=r[5];let u=e;return r[6]!==u?(t=u.filter(p),r[6]=u,r[7]=t):t=r[7],t.length/u.length*100},g=n.memo(e=>{let t,r,s,d,f,g;let p=(0,o.c)(13),{progress:y}=e,{openDrawer:m}=n.useContext(l.lv);p[0]!==m?(t=()=>{m("editProfile")},p[0]=m,p[1]=t):t=p[1];let _=t;return p[2]!==y?(r=(0,a.jsx)(i.x6,{id:"common.upDrawer.profileProgress",values:{number:y}}),p[2]=y,p[3]=r):r=p[3],p[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsxs)("a",{className:u().completeNow,children:[(0,a.jsx)(i.x6,{id:"common.upDrawer.completeNow"}),(0,a.jsx)(c.A,{name:"chevron-right",className:u().chevronRight})]}),p[4]=s):s=p[4],p[5]!==r?(d=(0,a.jsxs)("div",{className:u().row,children:[r,s]}),p[5]=r,p[6]=d):d=p[6],p[7]!==y?(f=(0,a.jsx)("progress",{className:u().progress,value:y,max:100}),p[7]=y,p[8]=f):f=p[8],p[9]!==_||p[10]!==d||p[11]!==f?(g=(0,a.jsxs)("div",{className:u().root,onClick:_,children:[d,f]}),p[9]=_,p[10]=d,p[11]=f,p[12]=g):g=p[12],g});function p(e){return e}},29542:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r(96540),o=r(18081),n=r(43151),i=r(29754),s=r(70289),l=r(54044);function c(e){let{user:t}=(0,a.useContext)(i.R),[r,c]=(0,a.useState)(n.i.CANCEL),[d,{data:u,error:f,loading:g,called:p}]=(0,o._)(s.cg);return(0,a.useEffect)(()=>{t&&e.id?d({variables:{gameId:e.id}}):c((0,l.hO)(e.slug))},[t,e.id,e.slug,d]),(0,a.useEffect)(()=>{p&&!g&&(f?(console.error("[useUserGameVote] Error fetching user game vote:",f),c((0,l.hO)(e.slug))):u&&c(u.getUserGameVote??n.i.CANCEL))},[u,f,g,p,e.slug]),{vote:r,loading:g}}},56257:e=>{e.exports={czyButton:"ProfileCompletionProgressBar_czyButton__P6EmX","czyButton--contained--purple":"ProfileCompletionProgressBar_czyButton--contained--purple__aOIW6","czyButton--contained--white":"ProfileCompletionProgressBar_czyButton--contained--white__Q9a6_","czyButton--contained--grey":"ProfileCompletionProgressBar_czyButton--contained--grey__cfPRG","czyButton--contained--alert":"ProfileCompletionProgressBar_czyButton--contained--alert__V7D7O","czyButton--contained--success":"ProfileCompletionProgressBar_czyButton--contained--success__DnXmJ","czyButton--contained--black":"ProfileCompletionProgressBar_czyButton--contained--black__RfpVd","czyButton--contained--green-gradient":"ProfileCompletionProgressBar_czyButton--contained--green-gradient__iszWI","czyButton--contained--animated-green-gradient":"ProfileCompletionProgressBar_czyButton--contained--animated-green-gradient__7i_Ef","scroll-gradient":"ProfileCompletionProgressBar_scroll-gradient__i8F0X","czyButton--outlined--purple":"ProfileCompletionProgressBar_czyButton--outlined--purple__CDV7i","czyButton--link--purple":"ProfileCompletionProgressBar_czyButton--link--purple__SypcH","czyButton--outlined--white":"ProfileCompletionProgressBar_czyButton--outlined--white___amd1","czyButton--link--white":"ProfileCompletionProgressBar_czyButton--link--white__L9VLd","czyButton--outlined--grey":"ProfileCompletionProgressBar_czyButton--outlined--grey__3S282","czyButton--link--grey":"ProfileCompletionProgressBar_czyButton--link--grey__eCMeh","czyButton--outlined--alert":"ProfileCompletionProgressBar_czyButton--outlined--alert__YcJJx","czyButton--link--alert":"ProfileCompletionProgressBar_czyButton--link--alert__AlfkX","czyButton--outlined--success":"ProfileCompletionProgressBar_czyButton--outlined--success__NqkGR","czyButton--link--success":"ProfileCompletionProgressBar_czyButton--link--success__dJKnk","czyButton--outlined":"ProfileCompletionProgressBar_czyButton--outlined__61x05","czyButton--disabled":"ProfileCompletionProgressBar_czyButton--disabled__OrEnh","czyButton--height50":"ProfileCompletionProgressBar_czyButton--height50__dYTCe","czyButton--height34":"ProfileCompletionProgressBar_czyButton--height34__6Qr0z","czyButton--fullWidth":"ProfileCompletionProgressBar_czyButton--fullWidth__U3ej3","czyButton--headerIcon":"ProfileCompletionProgressBar_czyButton--headerIcon__NU13g","czyButton--headerIcon--desktop":"ProfileCompletionProgressBar_czyButton--headerIcon--desktop__n_TzS","czyButton--headerIcon--mobile":"ProfileCompletionProgressBar_czyButton--headerIcon--mobile__H_FjB",root:"ProfileCompletionProgressBar_root__WFVnW",row:"ProfileCompletionProgressBar_row__cSiY2",completeNow:"ProfileCompletionProgressBar_completeNow__V8Hiu",chevronRight:"ProfileCompletionProgressBar_chevronRight__nZ_1R",progress:"ProfileCompletionProgressBar_progress__H_iJd"}}}]);