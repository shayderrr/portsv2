try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="75b2ef0d-48ce-4f7e-befe-64616980cc12",e._sentryDebugIdIdentifier="sentry-dbid-75b2ef0d-48ce-4f7e-befe-64616980cc12")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:crazygames-portal":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51177],{51177:(e,t,i)=>{i.d(t,{g:()=>$,A:()=>J});var s,n,r=i(74848),a=i(96540),d=i(70302),o=i(88506),h=i(77889),l=i(12896);let u=null;var c=i(16522),m=i(29754),g=i(80283),f=i(47413),p=i(36331),b=i(68819),v=i(42085),w=i(64821);let E=[{width:1910,height:970},{width:1360,height:660},{width:1370,height:650},{width:1370,height:620},{width:1530,height:750},{width:1360,height:650},{width:1910,height:940},{width:1370,height:660},{width:1360,height:630},{width:1080,height:710},{width:1920,height:970},{width:1360,height:620},{width:1910,height:960},{width:1370,height:670},{width:1530,height:710},{width:1910,height:930},{width:1370,height:630},{width:1920,height:940},{width:390,height:660}];var y=i(32705),A=i(46011),C=i(99261),B=i(28390);class R{constructor(e){this.id=e,this.previousTimeInView=0,this.isInView=!1,this.isInFocus=!0,this.isHidden=!1,this.inViewSince=Date.now(),this.inDOMSince=this.inViewSince}setHidden(e){this.isHidden=e}canRefresh(e,t){return this.isInView&&this.isInFocus&&this.totalTimeInView()>=e&&this.totalTimeInDOM()>=t}refreshed(){this.previousTimeInView=0,this.inViewSince=Date.now(),this.inDOMSince=this.inViewSince}cameIntoView(){this.isInView=!0,this.inViewSince=Date.now()}removedFromView(){this.isInView=!1,this.updateTimeInView()}pageLostFocus(){this.isInFocus=!1,this.isInView&&this.updateTimeInView()}pageRegainedFocus(){this.isInFocus=!0,this.isInView&&(this.inViewSince=Date.now())}updateTimeInView(){let e=Date.now()-this.inViewSince;this.previousTimeInView+=e,this.inViewSince=Date.now()}totalTimeInDOM(){return Date.now()-this.inDOMSince}totalTimeInView(){return this.isInView?this.previousTimeInView+Date.now()-this.inViewSince:this.previousTimeInView}}class I{constructor(e,t){this.handleVisibilityChange=()=>{let e=void 0!==this.hiddenKey&&this.isHidden(document,this.hiddenKey),t=B.A.isFullscreen()||B.A.isFakeFullscreen();e||t?this.pageLostFocus():this.pageRegainedFocus()},this.handleFullscreenChange=()=>{B.A.isFullscreen()||B.A.isFakeFullscreen()?this.pageLostFocus():this.pageRegainedFocus()},this.viewportThreshold=e,this.minimumTimeInViewInMs=t,this.adUnits=[],this.hiddenKey=this.calculateHiddenKey(document),this.observer=this.createObserver(),this.installEventListeners(),this.pageFocusChangeCallBacks=[],this.ioCallbackPending=[],this.ioCallbackPendingPromise=null,this.ioCallbackPendingResolve=null}calculateHiddenKey(e){return void 0!==e.hidden?"hidden":this.hasMsHiddenKey(e)?"msHidden":this.hasWebkitHiddenKey(e)?"webkitHidden":void 0}getVisibilityChangeKey(e){switch(e){case"hidden":return"visibilitychange";case"msHidden":return"msvisibilitychange";case"webkitHidden":return"webkitvisibilitychange"}}addElement(e){if(this.adUnits.find(t=>t.id===e))return;let t=this.getElementById(e);if(!t)return;this.ioCallbackPending.push(e),this.adUnits.push(new R(e));let i=t.parentElement;i&&this.observer.observe(i)}removeElement(e,t){this.adUnits=this.adUnits.filter(t=>t.id!==e),t&&t.parentElement&&this.observer.unobserve(t.parentElement),this.removeWaitingForCallbackElement(e)}addPageFocusChangeCallback(e){this.pageFocusChangeCallBacks.push(e)}stop(){this.adUnits=[],this.pageFocusChangeCallBacks=[],this.observer.disconnect(),this.removeEventListeners()}waitForObservedUnitsCallbacks(){return this.ioCallbackPendingPromise||(this.ioCallbackPendingPromise=new Promise(e=>{this.ioCallbackPendingResolve=e,0===this.ioCallbackPending.length&&e()})),this.ioCallbackPendingPromise}isUnitHidden(e){let t=this.adUnits.find(t=>t.id===e);return!t||t.isHidden}canUnitRefresh(e,t){let i=this.adUnits.find(t=>t.id===e);return!i||i.canRefresh(this.minimumTimeInViewInMs,t)}refreshedUnits(e){e.map(e=>this.getObservedUnit(e)).map(e=>e.refreshed())}intersectionCallback(e){e.forEach(e=>{let t=e.target.firstElementChild;if(t){let i=t.id,s=this.getObservedUnit(i);e.intersectionRatio>=this.viewportThreshold?s.cameIntoView():s.removedFromView(),s.setHidden(this.isEntryHidden(e)),this.removeWaitingForCallbackElement(i)}})}isEntryHidden(e){let{boundingClientRect:t}=e;return this.isBoundingRectHidden(t)}isBoundingRectHidden(e){return 0===e.height&&0===e.width}getElementById(e){return document.getElementById(e)||(console.error(`[AdObserver] could not find element with id ${e}`),null)}getObservedUnit(e){let t=this.adUnits.find(t=>t.id===e);if(!t)throw Error(`[AdObserver] observed unit ${e} not found`);return t}pageLostFocus(){this.adUnits.map(e=>e.pageLostFocus()),this.invokeCallBacks(!1)}pageRegainedFocus(){this.adUnits.map(e=>e.pageRegainedFocus()),this.invokeCallBacks(!0)}invokeCallBacks(e){this.pageFocusChangeCallBacks.forEach(t=>t(e))}createObserver(){return new IntersectionObserver((e,t)=>{this.intersectionCallback(e)},{threshold:[this.viewportThreshold]})}installEventListeners(){void 0!==this.hiddenKey&&document.addEventListener(this.getVisibilityChangeKey(this.hiddenKey),this.handleVisibilityChange),this.installFullscreenListener()}removeEventListeners(){void 0!==this.hiddenKey&&document.removeEventListener(this.getVisibilityChangeKey(this.hiddenKey),this.handleVisibilityChange),this.removeFullscreenListeners()}installFullscreenListener(){B.A.addFullscreenListener(this.handleFullscreenChange),B.A.addFakeFullscreenListener(this.handleFullscreenChange)}removeFullscreenListeners(){B.A.removeFullscreenListener(this.handleFullscreenChange),B.A.removeFakeFullscreenListener(this.handleFullscreenChange)}removeWaitingForCallbackElement(e){this.ioCallbackPending=this.ioCallbackPending.filter(t=>t!==e),0===this.ioCallbackPending.length&&this.ioCallbackPendingResolve&&(this.ioCallbackPendingResolve(),this.ioCallbackPendingResolve=null)}isHidden(e,t){switch(t){case"hidden":return e.hidden;case"msHidden":return!!this.hasMsHiddenKey(e)&&e.msHidden;case"webkitHidden":return!!this.hasWebkitHiddenKey(e)&&e.webkitHidden}}hasMsHiddenKey(e){return"boolean"==typeof e.msHidden}hasWebkitHiddenKey(e){return"boolean"==typeof e.webkitHidden}}var L=i(21011),D=i(341),T=i(56524);let S=function(e,t){let i=window.setTimeout(e,t);return()=>clearTimeout(i)};class U{constructor(e,t,i=S){this.timerFactory=i,this.timerPeriod=e,this.onEvent=t,this.timeRemaining=0}restart(){this.disposed||(this.clearCurrent(),this.startTimer(this.timerPeriod))}startTimer(e){this.timerDisposer=this.timerFactory(()=>{this.timerDisposer=void 0,this.onEvent()},e),this.timeStarted=this.now(),this.currentTimeout=e}pause(){if(this.disposed||!this.isRunning())return;this.clearCurrent();let e=this.now()-this.timeStarted;this.timeRemaining=this.currentTimeout-e}resume(e){if(this.disposed||this.isRunning())return;let t=void 0!==e?e:this.timeRemaining;t<=0?(this.timeRemaining=this.currentTimeout,this.onEvent(),this.isRunning()||this.restart()):this.startTimer(t)}dispose(){this.disposed=!0,this.clearCurrent()}clearCurrent(){void 0!==this.timerDisposer&&(this.timerDisposer(),this.timerDisposer=void 0)}isRunning(){return void 0!==this.timerDisposer}now(){return Date.now()}}class _{constructor(e,t,i){this.timeOfLastRefresh=0,this.timeOfMount=0,this.eventHandlerMemory={gamePlayStarted:!1},this.handleMessageEvent=e=>{if(!e.data||e.data.type!==D.x)return;let t=this.convertToRefreshTimerEvent(e.data);this.handleEvent(t)},this.handleEvent=e=>{let t=function(e,t,i,s,n,r,a,d){if("timerTriggered"===e)return s+(()=>{switch(a.type){case"regular":return a.timeBetweenRefreshes;case"smart":return a.minimumTimeBetweenRefreshes}})()<=1.1*n?{type:"refresh"}:{type:"ignore"};if(!t){switch(r.type){case"startOnMount":return"componentMounted"===e?{type:"restartTimer"}:{type:"ignore"};case"waitUntilAfterGameLoading":if("gameFinishedLoading"===e||"gameLoadingStateResponseSuccess"===e){let e=n-i,t=r.minimumWaitTimeAfterPageLoad;if(e>=t)return{type:"refresh"};return{type:"resumeTimer",customTimeout:Math.max(0,t-e)}}}return{type:"ignore"}}if("smart"===a.type)switch(e){case"gameplayStart":if(d.gamePlayStarted)break;return d.gamePlayStarted=!0,{type:"restartTimer"};case"adFinished":case"adError":case"rewardedAd":case"midgameAd":case"gameplayStop":if(!d.gamePlayStarted)break;if(d.gamePlayStarted=!1,n-s>=a.minimumTimeBetweenRefreshes)return{type:"refresh"}}return{type:"ignore"}}(e,this.timer.isRunning(),this.timeOfMount,this.timeOfLastRefresh,Date.now(),this.startMomentConfig,this.refreshConfig,this.eventHandlerMemory);this.onAction(t)},this.refreshAds=e,this.timer=new U(function(e){switch(e.type){case"smart":return e.maximumTimeBetweenRefreshes;case"regular":return e.timeBetweenRefreshes}}(i),()=>this.handleEvent("timerTriggered")),this.startMomentConfig=t,this.refreshConfig=i}refresh(){this.refreshAds()?(this.timeOfLastRefresh=Date.now(),this.timer.restart()):this.timer.resume()}handleExternalEvent(e){switch(e.type){case"focusChanged":return e.hasFocus?this.onAction({type:"resumeTimer"}):this.onAction({type:"pauseTimer"}),!0;case"initialAdsRequestFinished":return"startOnMount"===this.startMomentConfig.type&&this.onAction({type:"restartTimer"}),!0;case"mounted":return this.init(),this.handleEvent("componentMounted"),!0;case"willUnmount":return this.dispose(),!0}}getMinimumTimeInDOMBeforeRefresh(){return this.refreshConfig.minimumTimeInDOM}init(){this.requiresGameEventListener()&&(window.addEventListener("message",this.handleMessageEvent),"waitUntilAfterGameLoading"===this.startMomentConfig.type&&T.y()?.contentWindow?.postMessage("check-loading-state","*")),this.timeOfMount=Date.now()}dispose(){this.timer.dispose(),this.requiresGameEventListener()&&window.removeEventListener("message",this.handleMessageEvent)}requiresGameEventListener(){return"smart"===this.refreshConfig.type||"waitUntilAfterGameLoading"===this.startMomentConfig.type}onAction(e){switch(e.type){case"restartTimer":return this.timer.restart(),!0;case"pauseTimer":return this.timer.pause(),!0;case"resumeTimer":return this.timer.resume(),!0;case"refresh":return this.refresh(),!0;case"ignore":return!0}}convertToRefreshTimerEvent(e){return"gameLoadingStateResponse"===e.event?e.success?"gameLoadingStateResponseSuccess":"gameLoadingStateResponseFailure":e.event}}let O={regular:{minTimeBetweenConsecutiveRefreshes:3e4,maxTimeBetweenConsecutiveRefreshes:51e3,minTimeInDom:2e4},highlyAffectedSystems:{minTimeBetweenConsecutiveRefreshes:3e4,maxTimeBetweenConsecutiveRefreshes:15e4,minTimeInDom:2e4}},k=[{browsers:["safari"],os:[]}];function M(e){return e?e.toLowerCase().replace(/\s/g,""):"unknown"}var V=i(41962),F=i(85828),x=i(94166);let P=e=>{let t,i;let s=(0,c.c)(5),{dispatch:n}=e,r=(0,a.useContext)(F.A).services.adUnitService,{countryCode:d}=(0,a.useContext)(x.A);return s[0]!==r||s[1]!==d||s[2]!==n?(t=()=>{void 0!==r&&r.getAdUnitsConfig(d).then(e=>n({type:"adsConfigLoaded",config:e}))},i=[n,r,d],s[0]=r,s[1]=d,s[2]=n,s[3]=t,s[4]=i):(t=s[3],i=s[4]),(0,a.useEffect)(t,i),null};var H=i(62568);let G=e=>{let t,i;let s=(0,c.c)(3),{dispatch:n}=e;return s[0]!==n?(t=()=>{let e=()=>n({type:"consentGiven"}),t=(0,H.b)();return t.addConsentListener(e),()=>t.removeConsentListener(e)},i=[n],s[0]=n,s[1]=t,s[2]=i):(t=s[1],i=s[2]),a.useEffect(t,i),null},q=e=>{let t,i;let s=(0,c.c)(12),[n,r]=a.useState(!1),d=e.state.adsLibraryLoaded&&e.state.adsConfigLoaded,o=e.state.userInfo.countryCode,h=e.state.userInfo.device?.browser,{locale:u,dispatch:m,deviceType:g}=e;return s[0]!==m||s[1]!==d||s[2]!==n?(t=()=>{if(n||!d)return;let e=window.CrazygamesAds;if(r(!0),(0,l.isDefined)(e?.hasEnabledBidders)){let t=e.hasEnabledBidders;(async()=>{m({type:"enabledBannerBiddersLoaded",hasEnabledBannerBidders:await t("banner")})})().catch(()=>m({type:"enabledBannerBiddersLoaded",hasEnabledBannerBidders:!0}))}else m({type:"enabledBannerBiddersLoaded",hasEnabledBannerBidders:!0})},s[0]=m,s[1]=d,s[2]=n,s[3]=t):t=s[3],s[4]!==h||s[5]!==o||s[6]!==g||s[7]!==m||s[8]!==u||s[9]!==d||s[10]!==n?(i=[u,o,g,h,d,m,n],s[4]=h,s[5]=o,s[6]=g,s[7]=m,s[8]=u,s[9]=d,s[10]=n,s[11]=i):i=s[11],a.useEffect(t,i),null},W=e=>{let t,i;let s=(0,c.c)(8),{pageUrlHelper:n,dispatch:r,resetLibrary:d,adsLoaderContext:o}=e,[h]=(0,a.useState)(d),u=(0,a.useContext)(F.A).services,m=(0,a.useRef)(!1),g=o.adsLoader,f=o.initAds;return s[0]!==g||s[1]!==r||s[2]!==f||s[3]!==n||s[4]!==h||s[5]!==u?(t=()=>{let e=()=>{let e=window;if(h&&(0,l.isDefined)(e.CrazygamesAds)&&e.CrazygamesAds.reset(),!m.current){try{f(),u.crazyAnalyticsService.adsFinishedLoading(),u.analyticsService.checkAdblock()}catch{console.debug("Failed to initialize ads, likely due to an adblocker."),u.analyticsService.detectedAdblock()}m.current=!0}r({type:"adsLibraryLoaded"})};return g.loadCrazyAds(n),g.addLoadListener(e),()=>g.removeLoadListener(e)},i=[n,r,h,u,g,f],s[0]=g,s[1]=r,s[2]=f,s[3]=n,s[4]=h,s[5]=u,s[6]=t,s[7]=i):(t=s[6],i=s[7]),a.useEffect(t,i),null};var z=i(97264);class N{constructor(e){this.adsLibraryLoaded=!1,this.adsConfigLoaded=!1,this.enabledBannerBiddersLoaded=!1,this.consent=!1,this.config=null,this.hasEnabledBannerBidders=null,this.userInfo=(0,z.w)(),e(this.userInfo.countryCode)||this.onConsentGiven()}handleAction(e){switch(e.type){case"adsLibraryLoaded":return this.onAdsLibraryLoaded();case"adsConfigLoaded":return this.onAdsConfigLoaded(e);case"consentGiven":return this.onConsentGiven();case"enabledBannerBiddersLoaded":return this.onEnabledBannerBiddersLoaded(e)}}retrieveState(){return this.adsLibraryLoaded&&this.adsConfigLoaded&&this.enabledBannerBiddersLoaded&&this.consent&&null!==this.config&&null!==this.userInfo&&null!==this.hasEnabledBannerBidders?{ready:!0,adsLibraryLoaded:this.adsLibraryLoaded,enabledBannerBiddersLoaded:this.enabledBannerBiddersLoaded,adsConfigLoaded:this.adsConfigLoaded,userInfo:this.userInfo,config:this.config,consent:!0,hasEnabledBannerBidders:this.hasEnabledBannerBidders}:{ready:!1,adsLibraryLoaded:this.adsLibraryLoaded,enabledBannerBiddersLoaded:this.enabledBannerBiddersLoaded,adsConfigLoaded:this.adsConfigLoaded,userInfo:this.userInfo,config:this.config,consent:this.consent,hasEnabledBannerBidders:this.hasEnabledBannerBidders}}onAdsLibraryLoaded(){return this.adsLibraryLoaded=!0,this.retrieveState()}onAdsConfigLoaded(e){return this.adsConfigLoaded=!0,this.config=e.config,this.retrieveState()}onConsentGiven(){return this.consent=!0,this.retrieveState()}onEnabledBannerBiddersLoaded(e){return this.enabledBannerBiddersLoaded=!0,this.hasEnabledBannerBidders=e.hasEnabledBannerBidders,this.retrieveState()}}class j{constructor(e){this.bidderAttemptsWithoutBid={},this.biddersToDisable={},this.onRequestAdsResult=(e,t,i)=>{if(i)for(let s of e.codes??[]){let n=this.extractEnabledBiddersForAdUnitFromRequest(s,e,t);this.updateBidderAttemptsWithoutBid(s,i,n),delete this.biddersToDisable[s]}},this.getBiddersToDisable=e=>{let t=this.bidderAttemptsWithoutBid[e];if(!this.biddersToDisable[e]){if(t){let i=Object.keys(t).filter(e=>{let i=t[e];return void 0!==i&&i>=this.numberOfBidAttempts});this.biddersToDisable[e]=i}else this.biddersToDisable[e]=[]}return this.biddersToDisable[e]},this.reset=()=>{this.bidderAttemptsWithoutBid={},this.biddersToDisable={}},this.getCurrentNumberOfAttemptsWithoutBid=(e,t)=>{let i=this.bidderAttemptsWithoutBid[e];if(void 0===i)return 0;let s=i[t];return void 0===s?0:s},this.numberOfBidAttempts=e}extractEnabledBiddersForAdUnitFromRequest(e,t,i){let s={};return(i.bidders||[]).forEach(e=>{s[e.bidder]={...e}}),(t.units.find(t=>t.adUnit.code===e)?.bidders||[]).forEach(e=>{s[e.bidder]={...s[e.bidder],...e}}),Object.values(s).filter(e=>e.enabled&&"google"!==e.bidder).map(e=>e.bidder)}updateBidderAttemptsWithoutBid(e,t,i){let s=this.bidderAttemptsWithoutBid[e]||{},n=t[e],r=(n?.bids??[]).map(e=>e.bidder);i.forEach(e=>{r.includes(e)?s[e]=0:s[e]=(s[e]||0)+1}),this.bidderAttemptsWithoutBid[e]=s}}function K(){throw Error("[AdContext] No Advertising Context")}let $=a.createContext({addAdUnit:e=>K(),removeAdUnit:(e,t)=>K(),adblock:!1});var X=function(e){return e.ANDROID="android",e.IOS="ios",e.WINDOWS="windows",e.MAC="macos",e.LINUX="linux",e.CHROMIUM="chromiumos",e.UBUNTU="ubuntu",e.UNKNOWN="unknown",e.OTHER="other",e}(X||{});let Y=null;class Z extends a.Component{static #e=this.isFirstRequest=!0;constructor(e){super(e),this.refreshTimer=void 0,this.deviceInfo=null,this.email=null,this.userId=null,this.disabledBidderTracker=new j(5),this.resetBiddersToDisableInterval=0,this.dispatchLoadingAction=e=>{if(!this.mounted)return;let t=this.advertisingLoadingModel.handleAction(e);this.setState({loadingModelState:t})},this.addAdUnit=e=>{!this.adUnits.find(t=>t.id===e.id)&&(this.adUnits.push(e),this.observer&&this.adConfig&&this.addUnitToObserver(e))},this.removeAdUnit=(e,t)=>{this.adUnits=this.adUnits.filter(t=>t.id!==e.id),this.observer&&this.adConfig&&this.removeUnitFromObserver(e,t)},this.requestAndRenderAds=()=>{if(!this.observer)return!1;let e=[],t=this.getRefreshTimer();this.firstPageRequest?e=this.adUnits.filter(e=>!this.observer.isUnitHidden(e.id)):(0,l.isDefined)(t)&&(e=this.adUnits.filter(e=>this.observer.canUnitRefresh(e.id,t.getMinimumTimeInDOMBeforeRefresh())));let i=e.map(e=>e.id),s=this.adUnitsRequestConfig();if(0===s.length||0===i.length)return!0;let n={units:s,codes:i},r=window.CrazygamesAds;if(void 0===r)return e.forEach(e=>e.onRender(!0)),!1;let a=this.requestAdsOptions();return r.requestOnly(n,a).then(async e=>{if(!this.mounted)return;let t=this.renderAds(i);e&&this.disabledBidderTracker.onRequestAdsResult(n,a,e),await t}).catch(e=>console.error(e)),this.firstPageRequest&&(this.firstPageRequest=!1,Z.isFirstRequest=!1,this.getRefreshTimer()?.handleExternalEvent({type:"initialAdsRequestFinished"})),!0},this.pageFocusChangeCallback=e=>{this.mounted&&this.getRefreshTimer()?.handleExternalEvent({type:"focusChanged",hasFocus:e})},this.shouldWaitUntilConsented=e=>(0,o.xS)(e)||(0,o.AL)(e),this.adUnits=[],this.timeInViewInMs=1e4,this.viewPortThreshold=.5,this.observer=null,this.advertisingLoadingModel=new N(e=>(0,p.A)(e,this.props.pageUrlHelper)&&this.shouldWaitUntilConsented(e)),this.state={loadingModelState:this.advertisingLoadingModel.retrieveState()},this.disabled=this.props.disabled||!(0,b.xl)(this.props.device)||this.props.pageUrlHelper.shouldDisableAds()}componentDidMount(){this.mounted=!0,this.observer=new I(this.viewPortThreshold,this.timeInViewInMs),this.firstPageRequest=!0,this.resetBiddersToDisableInterval=window.setInterval(()=>{this.resetBiddersToDisable()},9e5),this.props.services.crazyAnalyticsService.analyticsInfo().then(e=>{this.userId=e.userId})}componentWillUnmount(){this.mounted=!1,this.getRefreshTimer()?.handleExternalEvent({type:"willUnmount"}),this.observer&&(this.observer.stop(),this.observer=null);let e=window;e.CrazygamesAds&&e.CrazygamesAds.nextPage&&e.CrazygamesAds.nextPage(),window.clearInterval(this.resetBiddersToDisableInterval)}componentDidUpdate(e,t,i){let s=this.state.loadingModelState;if(s.ready&&(null===this.adConfig||void 0===this.adConfig)){if(this.adConfig=s.config,this.deviceInfo=s.userInfo.device||null,!s.hasEnabledBannerBidders)return;this.initRefreshTimer(),this.addUnitsToObserver(),this.toRequestAds()}}render(){return(0,r.jsxs)(r.Fragment,{children:[!this.disabled&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W,{dispatch:this.dispatchLoadingAction,pageUrlHelper:this.props.pageUrlHelper,resetLibrary:!Z.isFirstRequest,adsLoaderContext:this.props.adsLoaderContext}),(0,r.jsx)(P,{dispatch:this.dispatchLoadingAction}),(0,r.jsx)(G,{dispatch:this.dispatchLoadingAction}),(0,r.jsx)(q,{dispatch:this.dispatchLoadingAction,state:this.state.loadingModelState,locale:(0,y.qz)(this.props.locale),deviceType:this.props.device.deviceType})]}),(0,r.jsx)($.Provider,{value:{addAdUnit:this.addAdUnit,removeAdUnit:this.removeAdUnit,adblock:!1},children:this.props.children})]})}async toRequestAds(){await this.requestAds(),this.mounted&&this.addObserverCallbacks()}async requestAds(){if(0!==this.adUnitsRequestConfig().length&&(await this.observer.waitForObservedUnitsCallbacks(),this.mounted))return this.requestAndRenderAds()}requestAdsOptions(){let{dollarRate:e,...t}=this.adConfig.advertising,i=this.getTimeout(),s=this.adConfig.bidders.map(e=>this.mapApiConfigToBidderConfig(e)),n=this.getUserDetails(),r=window.location.origin+window.location.pathname,a=(0,d.Jk)(r,{name:this.props.advertisingGame.gameName,tagSlugs:this.props.advertisingGame.tagsSlug,upvotes:this.props.advertisingGame.numLikes},(0,h.lR)((0,y.qz)(this.props.locale))),o=(0,d.Gu)({slug:this.props.advertisingGame.gameSlug,tagSlugs:this.props.advertisingGame.tagsSlug,categorySlug:this.props.advertisingGame.categoryEnSlug});return{...t,bidders:s,timeout:i,user:n,pageUrl:r,ortb2Site:a,dealTargeting:o}}async renderAds(e){try{let t=this.renderAdsOptions(e),i=window.CrazygamesAds;(0,l.isDefined)(i)&&await i.render(e,t)}catch(e){console.error(e)}}renderAdsOptions(e){let t=this.adConfig.bidders.find(e=>"google"===e.id),i=t?{googleBidder:{...this.mapApiConfigToBidderConfig(t),enabled:!0}}:{},s={};return e.forEach(e=>{(0,L.z)(e)?s[e]={clearSlotIfEmpty:!0}:s[e]={clearSlotIfEmpty:!1}}),{gam:this.gamKeys(),banner:{callback:e=>{let{minPrice:t,code:i,empty:s,type:n,houseAd:r}=e;if("UnitRendered"===n){var a,d;let e=this.props.services;a={analyticsService:e.analyticsService,crazyAnalyticsService:e.crazyAnalyticsService},d={value:r||s?0:t,gameSlug:this.props.advertisingGame.gameSlug},null===u&&(u={timeoutId:window.setTimeout(()=>{for(let e in a.crazyAnalyticsService.bannerAdConversion(u?.totalValue||0),u?.valueByGame)a.analyticsService.trackAdConversion({gameSlug:e,value:u?.valueByGame[e]??0});"undefined"!=typeof gtag&&u&&u.totalValue&&gtag("event","conversion",{send_to:"AW-312835820/UBOSCNjR06wDEOz9lZUB",value:u.totalValue,currency:"EUR"}),u=null},1e3),totalValue:0,valueByGame:{}}),u.totalValue=u.totalValue+d.value,u.valueByGame[d.gameSlug]=(u.valueByGame[d.gameSlug]||0)+d.value;let n=this.adUnits.find(e=>e.id===i);void 0!==n&&n.onRender(s)}},unitOptions:s},...i}}getTimeout(){return Z.isFirstRequest?2400:2e3}mapApiConfigToBidderConfig(e){let t={bidder:e.id,...e.config};return"adsense"===e.id?{...t,enabled:!1}:{enabled:!0,...t}}adUnitsRequestConfig(){return this.adUnits.map(e=>{let t=this.getUnitDefinition(e.id);if(!t)return console.error(`[Advertising] Unexpected id ${e.id}`),null;let i=this.disabledBidderTracker.getBiddersToDisable(e.id),s=t.config.request.bidders.map(e=>i.includes(e.bidder)||"adsense"===e.bidder?{...e,enabled:!1}:e);return{adType:"portalBanner",adUnit:{mediaTypes:t.definition.mediaTypes,code:e.id},slotId:t.definition.slotId,...t.config.request,bidders:s}}).filter(l.isDefined)}addUnitsToObserver(){this.adUnits.forEach(e=>{this.addUnitToObserver(e)})}addObserverCallbacks(){this.observer.addPageFocusChangeCallback(this.pageFocusChangeCallback)}addUnitToObserver(e){if(!this.getUnitDefinition(e.id)){console.error("Missing definition",e.id);return}this.observer.addElement(e.id)}removeUnitFromObserver(e,t){let i=this.getUnitDefinition(e.id);if(!i){console.error("Missing definition",e.id);return}i.definition.refresh&&this.observer.removeElement(e.id,t)}gamKeys(){let e;let{pageUrlHelper:t,advertisingGame:i}=this.props,{gameSlug:s,tagsSlug:n,categoryEnSlug:r}=i,a=t.routeData.hostname,d=(0,C.$x)();if(d){let t=new Date(d.date),i=t.getUTCDate().toString().padStart(2,"0"),s=(t.getUTCMonth()+1).toString().padStart(2,"0"),n=t.getUTCFullYear().toString().slice(-2);e=`${d.adGroup}_${i}_${s}_${n}`}let o=this.mapOsToGamOs(this.deviceInfo?.os.name),h=this.isLoggedIn();return{domain:a,pwa:`${(0,A.Mu)()}`,category_slug:r,game_slug:s,tags_slug:n.length>0?n:void 0,adgroup_acqdate:e,logged_in:`${h}`,os:o,locale:this.props.locale,...function(){let e=window.innerWidth,t=window.innerHeight;if(E.some(i=>i.width===e&&i.height===t))return{browser_size:`${e}x${t}`}}()}}isLoggedIn(){return!!this.props.userContext.user}mapOsToGamOs(e){switch(this.getCleanedString(e)){case"unknown":return X.UNKNOWN;case"android":return X.ANDROID;case"ios":return X.IOS;case"windows":return X.WINDOWS;case"macos":return X.MAC;case"linux":return X.LINUX;case"chromiumos":return X.CHROMIUM;case"ubuntu":return X.UBUNTU;default:return X.OTHER}}getUnitDefinition(e){return this.adConfig.units.find(t=>t.id===e)}getRefreshTimer(){return(0,l.isDefined)(this.refreshTimer)||this.initRefreshTimer(),this.refreshTimer}initRefreshTimer(){var e,t;if(!this.state.loadingModelState.ready||(0,l.isDefined)(this.refreshTimer))return;let{smartRefresh:i}=this.props,s=this.requestAndRenderAds;this.refreshTimer=(e=this.deviceInfo?.os.name,t=this.deviceInfo?.browser.name,new _(s,function(e){let t=.05>Math.random();return(0,b.Kg)(e)&&!t?{type:"waitUntilAfterGameLoading",minimumWaitTimeAfterPageLoad:45e3}:{type:"startOnMount"}}(this.props.device),function(e,t,i){let s=!function(e,t){let i=M(e),s=M(t);for(let e of k){let t=0===e.browsers.length||e.browsers.includes(s),n=0===e.os.length||e.os.includes(i);if(t&&n)return!0}return!1}(e,t)?O.regular:O.highlyAffectedSystems,n=i?.minWaitInMs!==void 0?i.minWaitInMs:s.minTimeBetweenConsecutiveRefreshes,r=i?.maxWaitInMs!==void 0?i.maxWaitInMs:s.maxTimeBetweenConsecutiveRefreshes;return{type:"smart",minimumTimeBetweenRefreshes:Math.min(n,r),maximumTimeBetweenRefreshes:Math.max(n,r),minimumTimeInDOM:s.minTimeInDom}}(e,t,i))),this.refreshTimer.handleExternalEvent({type:"mounted"}),this.firstPageRequest||this.refreshTimer.handleExternalEvent({type:"initialAdsRequestFinished"})}getUserEmail(){if((0,l.isDefined)(this.email))return this.email;let{userContext:e}=this.props,{user:t,loadingUser:i}=e;if(i)return null;let s=t?.email?.trim().toLowerCase().replace(/\+[^@]*@/g,"@");return this.email=s??null,this.email}getUserDetails(){var e;return{email:this.getUserEmail(),amazon:{applicable:(e=this.deviceInfo,null===Y&&(Y=!!e&&["Firefox","Safari","Mobile Safari"].some(t=>(0,b.Bd)(e?.browser,t))),Y)},id:this.userId}}resetBiddersToDisable(){this.disabledBidderTracker.reset()}getCleanedString(e){return e?e.toLowerCase().replace(/\s/g,""):"unknown"}}let J=(0,w.A)((0,f.A)((n=(0,v.A)((s=e=>{let t;let i=(0,c.c)(3),s=a.useContext(V.B);return i[0]!==s||i[1]!==e?(t=(0,r.jsx)(Z,{adsLoaderContext:s,...e}),i[0]=s,i[1]=e,i[2]=t):t=i[2],t},e=>{let t;let i=(0,c.c)(3),n=a.useContext(m.R);return i[0]!==e||i[1]!==n?(t=(0,r.jsx)(s,{userContext:n,...e}),i[0]=e,i[1]=n,i[2]=t):t=i[2],t})),e=>{let t;let i=(0,c.c)(3),{pageUrlHelper:s}=a.useContext(g.e);return i[0]!==s||i[1]!==e?(t=(0,r.jsx)(n,{pageUrlHelper:s,...e}),i[0]=s,i[1]=e,i[2]=t):t=i[2],t})))},21011:(e,t,i)=>{i.d(t,{z:()=>n});var s=i(88500);function n(e){switch(e){case s.Rj.RightMpuRefresh:case s.Rj.LeaderboardBelowGameRefresh:case s.Rj.SecondLeaderboardBelowGameRefresh:return!0;case s.Rj.SecondMpuBelowGameRefresh:return!1;default:throw Error(`Unknown ad unit id: ${e}`)}}},42085:(e,t,i)=>{i.d(t,{A:()=>d});var s=i(74848),n=i(16522),r=i(96540),a=i(5752);let d=function(e){return t=>{let i;let d=(0,n.c)(3),o=r.useContext(a.A);return d[0]!==o||d[1]!==t?(i=(0,s.jsx)(e,{device:o,...t}),d[0]=o,d[1]=t,d[2]=i):i=d[2],i}}},46489:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EXCLUDED_TAGS=t.AMAZON_CREATIVES=t.PREBID_VIDEO_CREATIVES=t.PREBID_VIDEO_CREATIVES_MAP=t.AVAILABLE_VIDEO_TYPES=t.AVAILABLE_AD_FORMATS=t.AVAILABLE_DEVICES=t.AVAILABLE_BIDDER_CODES=t.AVAILABLE_PREBID_SERVER_BIDDER_CODES=t.PREBID_SERVER_BIDDER_CODE_SUFFIX=t.AVAILABLE_PREBID_BIDDER_CODES=t.AVAILABLE_NON_PREBID_BIDDER_CODES=void 0,t.AVAILABLE_NON_PREBID_BIDDER_CODES=["google","amazon","adsense"],t.AVAILABLE_PREBID_BIDDER_CODES=["ix","rubicon","sharethrough","pubmatic","appnexus","goldbach","seedtag","ozone","ttd","nexx360","openx","triplelift","medianet"],t.PREBID_SERVER_BIDDER_CODE_SUFFIX="_server",t.AVAILABLE_PREBID_SERVER_BIDDER_CODES=[],t.AVAILABLE_BIDDER_CODES=[...t.AVAILABLE_NON_PREBID_BIDDER_CODES,...t.AVAILABLE_PREBID_BIDDER_CODES,...t.AVAILABLE_PREBID_SERVER_BIDDER_CODES],t.AVAILABLE_DEVICES=["desktop","mobile","tablet"],t.AVAILABLE_AD_FORMATS=["banner","video"],t.AVAILABLE_VIDEO_TYPES=["preroll","midroll","rewarded"],t.PREBID_VIDEO_CREATIVES_MAP={appnexus:"138242044687",ix:"138241895930",pubmatic:"138241896683",rubicon:"138241885337",sharethrough:"138382194304",goldbach:"138479636654",seedtag:"138480188935",ozone:"138520313072",ttd:"138516025707",nexx360:"138520677054",triplelift:"138342033878",openx:"138241895621",medianet:"138526849982"},t.PREBID_VIDEO_CREATIVES=Object.values(t.PREBID_VIDEO_CREATIVES_MAP).filter(e=>null!==e),t.AMAZON_CREATIVES=["138340379973","138340379976","138340320638","138340379970","138340320629","138340320635","138340379967","138340379961","138340379964","138340320632"],t.EXCLUDED_TAGS=["army","battle-royale","battleship","bloody","bomberman","cannon","first-person-shooter","gta","gun","horde-survival","hunting","jump-scare","killing","mmo","police","scary","shooting","sniper","soldier","surgery","survive","tank","third-person-shooter","war"]},70302:(e,t,i)=>{t.Jk=function(e,t,i){let r=(t.tagSlugs||[]).filter(e=>-1===s.EXCLUDED_TAGS.indexOf(e)),a={title:t.name,url:e??window.location.href,context:2,userrating:`${t.upvotes}`,sourcerelationship:1,keywords:r.join(","),language:i};return{page:e,content:a,name:"CrazyGames",keywords:n.join(",")}},t.Gu=function(e){return{game_slug:e.slug,tags_slug:e.tagSlugs,category_slug:e.categorySlug}};let s=i(46489),n=["online games","free games","browser games","html5 games","web games","casual games","action games","multiplayer games","puzzle games","mobile-friendly games","instant play"]},88500:(e,t)=>{var i;t.Rj=void 0,function(e){e.LeaderboardBelowGameRefresh="div-gpt-ad-1590672385835-0",e.RightMpuRefresh="div-gpt-ad-1590672182999-0",e.SecondLeaderboardBelowGameRefresh="div-gpt-ad-1724075559578-0",e.SecondMpuBelowGameRefresh="div-gpt-ad-1731941770755-0"}(i||(t.Rj=i={})),Object.values(i)}}]);