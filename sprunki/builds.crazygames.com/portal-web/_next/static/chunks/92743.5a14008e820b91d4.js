try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="50dd51a5-c5da-48a5-b92f-52065a156e80",e._sentryDebugIdIdentifier="sentry-dbid-50dd51a5-c5da-48a5-b92f-52065a156e80")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:crazygames-portal":!0})}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92743],{91224:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(16522),o=n(96540),a=n(19748),r=n(72291),c=n(29569),l=n(20763),s=n(85828);let u=()=>{let e,t,n;let u=(0,i.c)(13),{routeHelper:d}=o.useContext(c.A),f=r.ZV(),{crazyAnalyticsService:m}=o.useContext(s.A).services,{crazyRouterChange:_}=o.useContext(l.G),y=a.Z6();u[0]!==m||u[1]!==_||u[2]!==f||u[3]!==d||u[4]!==y?(e=(e,t)=>{var n;let i=y({variables:{input:{id:e.id,status:"accepted"}}});f(e.id,"accepted");let o=d.localizedJoinUrl(e.game.gameSlug,e.game.joinUrl).as||e.game.joinUrl;m.gameInteractionEvent({method:"invite",origin:"popupNotification",action:"accept",target:e.fromUser.id,targetStatus:null,targetGameId:e.game.gameId}),i.finally(()=>{_(o)}),n=o,window.location.href===n&&t?.()},u[0]=m,u[1]=_,u[2]=f,u[3]=d,u[4]=y,u[5]=e):e=u[5];let g=e;u[6]!==m||u[7]!==f||u[8]!==y?(t=(e,t)=>{y({variables:{input:{id:e.id,status:"declined"}}}),f(e.id,"declined"),m.gameInteractionEvent({method:"invite",origin:"popupNotification",action:"decline",target:e.fromUser.id,targetStatus:null,targetGameId:e.game.gameId}),t?.()},u[6]=m,u[7]=f,u[8]=y,u[9]=t):t=u[9];let h=t;return u[10]!==g||u[11]!==h?(n={onAcceptClick:g,onDeclineClick:h},u[10]=g,u[11]=h,u[12]=n):n=u[12],n}},92743:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ei});var i=n(74848),o=n(16522),a=n(96540),r=n(19748),c=n(23421),l=n(5752),s=n(68819),u=n(65326),d=n.n(u);let f=a.forwardRef((e,t)=>{let n,a,r;let l=(0,o.c)(9),{icon:s,message:u,style:f}=e;return l[0]!==s?(n=(0,i.jsx)("div",{className:d().icon,children:s}),l[0]=s,l[1]=n):n=l[1],l[2]!==u?(a=(0,i.jsx)("div",{className:d().message,children:u}),l[2]=u,l[3]=a):a=l[3],l[4]!==t||l[5]!==f||l[6]!==n||l[7]!==a?(r=(0,i.jsxs)(c.Zv,{ref:t,role:"alert",className:d().snackbarContent,style:f,children:[n,a]}),l[4]=t,l[5]=f,l[6]=n,l[7]=a,l[8]=r):r=l[8],r});var m=n(59483),_=n(82964),y=n(72762),g=n(45674),h=n(77488),p=n(21916),C=n(35196),v=n.n(C);let z=`${_.A.Instance.data.files}crazygames-portal/sounds/notification.mp3`,B=a.forwardRef((e,t)=>{let n,r,l,s,u,d,f,_,C,B,N,x,b,j,k,w,E,I,S,A,D,U,R,P,T;let L=(0,o.c)(71),{id:G,fromUser:q,thumbnailData:O,mainCtaColor:F,secondaryCtaColor:W,message:Q,accept:J,decline:M,style:Z}=e,{closeSnackbar:$}=(0,c.dh)();L[0]===Symbol.for("react.memo_cache_sentinel")?(n={volume:.6},L[0]=n):n=L[0];let K=n,[V]=(0,m.A)(z,K),{paused:X,setPaused:Y}=a.useContext(p.$),[H,ee]=a.useState(0),et=O&&O.url?O.url:q.profile.avatar;L[1]!==$||L[2]!==G?(r=()=>{$(G)},L[1]=$,L[2]=G,L[3]=r):r=L[3];let en=r;L[4]!==$||L[5]!==M||L[6]!==G?(l=()=>{M?.onAction&&M.onAction(),$(G)},L[4]=$,L[5]=M,L[6]=G,L[7]=l):l=L[7];let ei=l;L[8]!==J||L[9]!==$||L[10]!==G?(s=()=>{J?.onAction&&J.onAction(),$(G)},L[8]=J,L[9]=$,L[10]=G,L[11]=s):s=L[11];let eo=s;L[12]!==X||L[13]!==Y?(u=()=>{X||Y(!0)},L[12]=X,L[13]=Y,L[14]=u):u=L[14];let ea=u;L[15]!==X||L[16]!==Y?(d=()=>{X&&Y(!1)},L[15]=X,L[16]=Y,L[17]=d):d=L[17];let er=d,ec=a.useRef(null);L[18]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{ec.current&&(clearInterval(ec.current),ec.current=null)},L[18]=f):f=L[18];let el=f;L[19]!==V?(_=()=>{V&&V()},C=[V],L[19]=V,L[20]=_,L[21]=C):(_=L[20],C=L[21]),a.useEffect(_,C),L[22]!==$||L[23]!==X||L[24]!==G?(B=()=>(X?el():ec.current||(ec.current=setInterval(()=>{ee(e=>e>=100?(el(),$(G),100):e+.8)},80)),el),N=[$,X,G],L[22]=$,L[23]=X,L[24]=G,L[25]=B,L[26]=N):(B=L[25],N=L[26]),a.useEffect(B,N),L[27]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)(g.A,{name:"close"}),L[27]=x):x=L[27],L[28]!==en?(b=(0,i.jsx)("div",{className:v().closeContainer,onClick:en,children:x}),L[28]=en,L[29]=b):b=L[29],L[30]!==et?(j=(0,y.Ay)(et,{width:50,height:50}),L[30]=et,L[31]=j):j=L[31];let es=O?O.altText:"Avatar",eu=et||"";L[32]!==eu?(k=(0,y.Wn)(eu,{width:50,height:50}),L[32]=eu,L[33]=k):k=L[33];let ed=`${v().avatar} ${O&&v()[O.shape]}`;L[34]!==j||L[35]!==es||L[36]!==k||L[37]!==ed?(w=(0,i.jsx)("img",{src:j,alt:es,srcSet:k,className:ed}),L[34]=j,L[35]=es,L[36]=k,L[37]=ed,L[38]=w):w=L[38],L[39]!==q.username?(E=(0,i.jsx)("div",{className:v().username,children:q.username}),L[39]=q.username,L[40]=E):E=L[40],L[41]!==Q?(I=(0,i.jsx)("div",{className:v().message,children:Q}),L[41]=Q,L[42]=I):I=L[42],L[43]!==E||L[44]!==I?(S=(0,i.jsxs)("div",{className:v().textContainer,children:[E,I]}),L[43]=E,L[44]=I,L[45]=S):S=L[45],L[46]!==w||L[47]!==S?(A=(0,i.jsxs)("div",{className:v().avatarContainer,children:[w,S]}),L[46]=w,L[47]=S,L[48]=A):A=L[48],L[49]!==M||L[50]!==ei||L[51]!==W?(D=M&&(0,i.jsx)(h.A,{variant:"contained",height:34,color:W,onClick:ei,children:M.element}),L[49]=M,L[50]=ei,L[51]=W,L[52]=D):D=L[52],L[53]!==J.element||L[54]!==eo||L[55]!==F?(U=(0,i.jsx)(h.A,{variant:"contained",color:F,height:34,onClick:eo,children:J.element}),L[53]=J.element,L[54]=eo,L[55]=F,L[56]=U):U=L[56],L[57]!==D||L[58]!==U?(R=(0,i.jsxs)("div",{className:v().buttonContainer,children:[D,U]}),L[57]=D,L[58]=U,L[59]=R):R=L[59];let ef=`${H}%`;return L[60]!==ef?(P=(0,i.jsx)("div",{className:v().countdownBar,style:{width:ef}}),L[60]=ef,L[61]=P):P=L[61],L[62]!==ea||L[63]!==er||L[64]!==t||L[65]!==Z||L[66]!==b||L[67]!==A||L[68]!==R||L[69]!==P?(T=(0,i.jsxs)(c.Zv,{ref:t,role:"alert",className:v().snackbarContent,style:Z,onMouseEnter:ea,onMouseLeave:er,children:[b,A,R,P]}),L[62]=ea,L[63]=er,L[64]=t,L[65]=Z,L[66]=b,L[67]=A,L[68]=R,L[69]=P,L[70]=T):T=L[70],T}),N=e=>{let t,n,r;let u=(0,o.c)(6),{children:d}=e,[m,_]=a.useState(!1),y=a.useContext(l.A);return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{_(!0)},n=[],u[0]=t,u[1]=n):(t=u[0],n=u[1]),a.useEffect(t,n),u[2]!==d||u[3]!==m||u[4]!==y?(r=m&&(0,s.xl)(y)?(0,i.jsx)(c.n,{Components:{userportalCoolNotification:B,userportalCalmNotification:f},anchorOrigin:{vertical:"bottom",horizontal:"right"},children:d}):(0,i.jsx)(i.Fragment,{children:d}),u[2]=d,u[3]=m,u[4]=y,u[5]=r):r=u[5],r};var x=n(72291),b=n(4743),j=n(29569);let k=()=>{let e,t;let n=(0,o.c)(4),{enqueueSnackbar:i}=(0,c.dh)();n[0]!==i?(e=e=>{let{fromUser:t,thumbnailData:n,mainCtaColor:o,secondaryCtaColor:a,message:r,accept:c,decline:l,key:s,preventDuplicate:u}=e;return i(r,{variant:"userportalCoolNotification",persist:!0,fromUser:t,thumbnailData:void 0===n?{shape:"circle"}:n,mainCtaColor:void 0===o?"purple":o,secondaryCtaColor:void 0===a?"grey":a,accept:c,decline:l,key:void 0===s?void 0:s,preventDuplicate:void 0!==u&&u})},n[0]=i,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t={enqueueSnackbar:a},n[2]=a,n[3]=t):t=n[3],t},w=()=>{let e,t,n,i;let c=(0,o.c)(8),[l]=r.u_(),{data:s}=x.CX(),u=s?.friends,d=(0,a.useRef)(u),f=(0,a.useRef)(l),[m,_]=a.useState(null);return c[0]!==l?(e=()=>{f.current=l},t=[l],c[0]=l,c[1]=e,c[2]=t):(e=c[1],t=c[2]),(0,a.useEffect)(e,t),c[3]!==u?(n=()=>{let e=f.current,t=d.current,n=u?.filter(e=>!t?.find(t=>t.id===e.id));_(e.filter(e=>n?.some(t=>e.user.id===t.id))),d.current=u},c[3]=u,c[4]=n):n=c[4],c[5]!==u||c[6]!==l?(i=[u,l],c[5]=u,c[6]=l,c[7]=i):i=c[7],(0,a.useEffect)(n,i),m},E=a.memo(()=>{let e,t,n,r,c;let l=(0,o.c)(10),{enqueueSnackbar:s}=k(),{settings:u}=x.Qg(),d=u?.notificationPreferences?.interactiveNotifications!==!1,f=(0,a.useRef)(d),{routeHelper:m}=a.useContext(j.A);l[0]!==m?(e=m.tagPageDirectLink("multiplayer"),l[0]=m,l[1]=e):e=l[1];let _=e,y=w();return l[2]!==d?(t=()=>{f.current=d},n=[d],l[2]=d,l[3]=t,l[4]=n):(t=l[3],n=l[4]),a.useEffect(t,n),l[5]!==y||l[6]!==s||l[7]!==_?(r=()=>{let e=f.current;y&&y.forEach(t=>{e&&s({message:(0,i.jsx)(b.x6,{id:"friends.upDrawer.notifications.userFriendRequestAccepted"}),fromUser:t.user,accept:{element:(0,i.jsx)(b.x6,{id:"friends.upDrawer.notifications.playTogether"}),onAction:()=>{window.open(_.as,"_blank")}}})})},c=[s,y,_],l[5]=y,l[6]=s,l[7]=_,l[8]=r,l[9]=c):(r=l[8],c=l[9]),a.useEffect(r,c),null});var I=n(85828);let S=()=>{let e,t;let n=(0,o.c)(8),[c]=r.xm(),{enqueueSnackbar:l}=k(),{crazyAnalyticsService:s}=a.useContext(I.A).services,{settings:u}=x.Qg(),[d]=x.zn(),[f]=x.SS(),m=(0,a.useRef)(null),_=u?.notificationPreferences?.interactiveNotifications!==!1;return n[0]!==d||n[1]!==_||n[2]!==s||n[3]!==l||n[4]!==f||n[5]!==c?(e=()=>{if(!c)return;if(0===c.length){m.current=new Date(0);return}let e=[...c].sort(A)[0],t=new Date(e.requestAvailableSince);_&&null!==m.current&&t.getTime()>m.current.getTime()&&l({message:(0,i.jsx)(b.x6,{id:"friends.upDrawer.notifications.userFriendRequest"}),fromUser:e.user,accept:{element:(0,i.jsx)(b.x6,{id:"friends.upDrawer.notifications.accept"}),onAction:()=>{d(e.user.id),s.friendRequestEvent({action:"accept",target:e.user.id,origin:"friendRequestPopup"})}},decline:{element:(0,i.jsx)(b.x6,{id:"friends.upDrawer.notifications.decline"}),onAction:()=>{f(e.user.id),s.friendRequestEvent({action:"decline",target:e.user.id,origin:"friendRequestPopup"})}}}),m.current=t},t=[c,l,_,d,f,s],n[0]=d,n[1]=_,n[2]=s,n[3]=l,n[4]=f,n[5]=c,n[6]=e,n[7]=t):(e=n[6],t=n[7]),a.useEffect(e,t),null};function A(e,t){return new Date(t.requestAvailableSince).getTime()-new Date(e.requestAvailableSince).getTime()}var D=n(341),U=n(29754),R=n(55881),P=n(56800);let T=()=>{let e,t;let n=(0,o.c)(5),{openDrawer:i}=(0,a.useContext)(R.lv),{user:r}=(0,a.useContext)(U.R),{setGameInviteLink:c}=a.useContext(P.Tz);n[0]!==i||n[1]!==c||n[2]!==r?(e=()=>{let e=e=>{if(!e.data||e.data.type!==D.x)return;let t=e.data;"inviteButtonClick"===t.event?(c(t.url),r?i("inviteFriends"):i("friendsGuest")):"exitButtonWithInviteClick"===t.event&&c(t.url)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},t=[i,c,r],n[0]=i,n[1]=c,n[2]=r,n[3]=e,n[4]=t):(e=n[3],t=n[4]),a.useEffect(e,t)};var L=n(91224);let G=()=>{let{settings:e}=x.Qg(),{notifications:t,refetch:n}=x.E$({skip:!0}),o=x.eA(),c=x.tv(),{enqueueSnackbar:l}=k(),[s,u]=a.useState(!0),d=!1!=!e?.privacyPreferences?.friendsCanSendGameInvites||!s,f=r.X1(d),m=r.Li(d),_=e?.notificationPreferences?.interactiveNotifications!==!1,{onAcceptClick:y,onDeclineClick:g}=(0,L.A)();a.useEffect(()=>{let e=()=>{u(!document.hidden)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),a.useEffect(()=>{if(f){let e={...f,type:"GAME_INVITE",data:{status:null}};o(e),_&&l({message:(0,i.jsx)(b.x6,{id:"friends.upDrawer.notifications.userInvitedToPlay",values:{game:(0,i.jsx)("span",{style:{fontWeight:700},children:f.game.gameName})}}),fromUser:f.fromUser,thumbnailData:{shape:"square",url:f.game.gameCover,altText:f.game.gameName},mainCtaColor:"animated-green-gradient",accept:{element:(0,i.jsx)(b.x6,{id:"friends.popup.receiveGameInvite.accept"}),onAction:()=>{y(e)}},decline:{element:(0,i.jsx)(b.x6,{id:"friends.popup.receiveGameInvite.decline"}),onAction:()=>{g(e)}}})}},[o,l,f,_,y,g]),a.useEffect(()=>{if(m){let{userId:e,joinUrl:i,expireAt:o}=m;(async()=>{try{let a=(t&&t.length>0?t:(await n()).data?.notifications||[]).find(t=>t.fromUser.id===e&&t.game.joinUrl===i);a&&c(a.id,o)}catch(e){console.error("Error processing game invite retraction:",e)}})()}},[t,m,c,n])},q=()=>{let e,t,n;let i=(0,o.c)(5),{enqueueSnackbar:r}=(0,c.dh)();i[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Set,i[0]=e):e=i[0];let l=a.useRef(e);i[1]!==r?(t=e=>{let{message:t,icon:n,debounce:i}=e;!(i?.key&&l.current.has(i.key))&&(r(t,{variant:"userportalCalmNotification",autoHideDuration:1e4,disableWindowBlurListener:!0,icon:n}),i&&(l.current.add(i.key),setTimeout(()=>{l.current.delete(i.key)},i.interval)))},i[1]=r,i[2]=t):t=i[2];let s=t;return i[3]!==s?(n={enqueueSnackbar:s},i[3]=s,i[4]=n):n=i[4],n},O=()=>{let e,t;let n=(0,o.c)(2),[i,c]=a.useState(!0),l=r.gE(!i);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=()=>{c(!document.hidden)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},t=[],n[0]=e,n[1]=t):(e=n[0],t=n[1]),a.useEffect(e,t),l},F=()=>{let e,t;let n=(0,o.c)(5),{enqueueSnackbar:r}=q(),{settings:c}=x.Qg(),l=c?.notificationPreferences?.informationalNotifications!==!1,s=O();n[0]!==l||n[1]!==r||n[2]!==s?(e=()=>{if(s&&l&&s.status){let e,t;"accepted"===s.status?(e="friends.upDrawer.notifications.acceptedGameInvitation",t=(0,i.jsx)("span",{children:"\uD83E\uDD73"})):"declined"===s.status&&(e="friends.upDrawer.notifications.declinedGameInvitation",t=(0,i.jsx)("span",{children:"âŒ"})),e&&t&&r({message:(0,i.jsx)(b.x6,{id:e,values:{username:(0,i.jsx)("span",{style:{fontWeight:700},children:s.fromUser.username}),game:(0,i.jsx)("span",{style:{fontWeight:700},children:s.game.gameName})}}),icon:t})}},t=[s,l,r],n[0]=l,n[1]=r,n[2]=s,n[3]=e,n[4]=t):(e=n[3],t=n[4]),a.useEffect(e,t)},W=()=>{let e=(0,o.c)(5);G(),F(),T();let{settings:t}=x.Qg(),n=x.mQ();if(t?.notificationPreferences?.friendRequests){let t,o,a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(S,{}),e[0]=t):t=e[0],e[1]!==n?(o=n&&(0,i.jsx)(E,{}),e[1]=n,e[2]=o):o=e[2],e[3]!==o?(a=(0,i.jsxs)(i.Fragment,{children:[t,o]}),e[3]=o,e[4]=a):a=e[4],a}return null},Q=(e,t)=>{let[n,i]=a.useState(!1),{userProfile:o}=x.sb(e,void 0,{skip:!t||n}),r=a.useRef(o);return a.useEffect(()=>{o&&(i(!0),r.current=o)},[o]),{userProfile:r.current,hasFetchedProfile:n}},J=a.memo(e=>{let t,n;let c=(0,o.c)(14),{friendId:l,sharesLiveGameActivity:s}=e,u=r.xS(l,s),d=u?.updatedUserStatus.userStatus.status,{userProfile:f,hasFetchedProfile:m}=Q(l,"online"===d),_=a.useRef(null),{enqueueSnackbar:y}=q(),{settings:g}=x.Qg(),h=g?.notificationPreferences?.informationalNotifications!==!1;return c[0]!==h||c[1]!==y||c[2]!==l||c[3]!==m||c[4]!==d||c[5]!==f?.username?(t=()=>{if(m){if("online"===d){if(_.current===d)return;_.current=d;let e=f?.username||"";h&&y({debounce:{interval:2e4,key:`friend-online-${l}`},message:(0,i.jsx)(b.x6,{id:"friends.notifications.friendIsOnline",values:{username:(0,i.jsx)("span",{style:{fontWeight:700},children:e})}}),icon:(0,i.jsx)("span",{children:"\uD83D\uDC4B"})})}else _.current=null}},c[0]=h,c[1]=y,c[2]=l,c[3]=m,c[4]=d,c[5]=f?.username,c[6]=t):t=c[6],c[7]!==h||c[8]!==y||c[9]!==l||c[10]!==m||c[11]!==d||c[12]!==f?(n=[d,y,h,l,m,f],c[7]=h,c[8]=y,c[9]=l,c[10]=m,c[11]=d,c[12]=f,c[13]=n):n=c[13],a.useEffect(t,n),null});var M=n(79099),Z=n(20763);let $=()=>{let e,t;let n=(0,o.c)(6),{routeHelper:i}=a.useContext(j.A),{crazyAnalyticsService:r}=a.useContext(I.A).services,{crazyRouterChange:c}=a.useContext(Z.G);n[0]!==r||n[1]!==c||n[2]!==i?(e=(e,t)=>{var n;let o=e.gameSlug?i.localizedJoinUrl(e.gameSlug,e.joinUrl):{href:e.joinUrl,as:e.joinUrl};e.gameId&&r.gameInteractionEvent({method:"friendJoinable",origin:"popupNotification",action:"send",target:e.userId,targetStatus:null,targetGameId:e.gameId}),c(o.href,o.as),n=o.as,window.location.href===n&&t?.()},n[0]=r,n[1]=c,n[2]=i,n[3]=e):e=n[3];let l=e;return n[4]!==l?(t={onAcceptClick:l},n[4]=l,n[5]=t):t=n[5],t},K=e=>{let t,n,c,l;let s=(0,o.c)(18),{userId:u,sharesLiveGameActivity:d}=e,f=r.sZ(u,d),{userProfile:m,hasFetchedProfile:_}=Q(u,!!f),y=a.useRef(null),{gameInviteLink:g}=a.useContext(P.Tz),{enqueueSnackbar:h}=k(),{onAcceptClick:p}=$(),{routeHelper:C}=a.useContext(j.A),v=(0,M.bi)(),z=a.useRef(g),B=a.useRef(m),N=a.useRef(u);return s[0]!==g||s[1]!==u||s[2]!==m?(t=()=>{z.current=g,B.current=m,N.current=u},n=[g,m,u],s[0]=g,s[1]=u,s[2]=m,s[3]=t,s[4]=n):(t=s[3],n=s[4]),a.useEffect(t,n),s[5]!==h||s[6]!==f||s[7]!==_||s[8]!==v||s[9]!==p?(c=()=>{if(!_)return;if(!f){y.current=null;return}let{joinUrl:e,gameSlug:t}=f;if(!t||!e||z.current&&v(t,e,z.current))return;let n=JSON.stringify(f);if(y.current===n)return;y.current=n;let o=B.current?.profile?.avatar||"",a=B.current?.username||"";h({key:`${f.gameName}-${f.userId}`,preventDuplicate:!0,message:(0,i.jsx)(b.x6,{id:"friends.popup.friendJoinable.text",values:{gameName:(0,i.jsx)("span",{style:{fontWeight:700},children:f.gameName})}}),fromUser:{id:N.current,profile:{avatar:o},username:a},thumbnailData:{shape:"square",url:f.gameCover??void 0,altText:f.gameName??void 0},mainCtaColor:"animated-green-gradient",accept:{element:(0,i.jsx)(b.x6,{id:"friends.popup.friendJoinable.button"}),onAction:()=>{p({username:a,joinUrl:e,avatar:o,gameSlug:f.gameSlug,gameId:f.gameId,userId:N.current,gameName:f.gameName})}}})},s[5]=h,s[6]=f,s[7]=_,s[8]=v,s[9]=p,s[10]=c):c=s[10],s[11]!==h||s[12]!==f||s[13]!==_||s[14]!==v||s[15]!==p||s[16]!==C?(l=[f,h,p,C,v,_],s[11]=h,s[12]=f,s[13]=_,s[14]=v,s[15]=p,s[16]=C,s[17]=l):l=s[17],a.useEffect(c,l),null};var V=n(86715);let X=()=>{let e,t,n,i,r;let c=(0,o.c)(7),l=(0,V.useRouter)(),s=O();c[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],c[0]=e):e=c[0];let[u,d]=a.useState(e);return c[1]!==s?(t=()=>{s?.status==="accepted"&&d(e=>[...e.filter(e=>e.id!==s.fromUser.id),s.fromUser])},n=[s],c[1]=s,c[2]=t,c[3]=n):(t=c[2],n=c[3]),a.useEffect(t,n),c[4]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{d([])},c[4]=i):i=c[4],c[5]!==l.asPath?(r=[l.asPath],c[5]=l.asPath,c[6]=r):r=c[6],a.useEffect(i,r),u},Y=()=>{let e,t,n,i;let r=(0,o.c)(6),c=X();r[0]!==c?(e=c.map(ee),r[0]=c,r[1]=e):e=r[1];let l=e,s=a.useRef(l);return r[2]!==l?(t=()=>{s.current=l},n=[l],r[2]=l,r[3]=t,r[4]=n):(t=r[3],n=r[4]),a.useEffect(t,n),r[5]===Symbol.for("react.memo_cache_sentinel")?(i=e=>e&&s.current.includes(e),r[5]=i):i=r[5],i},H=e=>{let t,n,c,l,s,u,d;let f=(0,o.c)(16),{userId:m,sharesLiveGameActivity:_}=e,{gameInviteLink:y}=a.useContext(P.Tz),g=r.sZ(m,_),[h,p]=a.useState(!1),C=!g||!y||h;f[0]!==C?(t={skip:C},f[0]=C,f[1]=t):t=f[1];let{userProfile:v}=x.sb(m,void 0,t),z=a.useRef(v),B=a.useRef(null),{enqueueSnackbar:N}=q(),j=Y(),k=(0,M.bi)(),w=a.useRef(y),E=a.useRef(m);return f[2]!==v?(n=()=>{v&&(p(!0),z.current=v)},c=[v],f[2]=v,f[3]=n,f[4]=c):(n=f[3],c=f[4]),a.useEffect(n,c),f[5]!==y||f[6]!==m?(l=()=>{w.current=y,E.current=m},s=[y,m],f[5]=y,f[6]=m,f[7]=l,f[8]=s):(l=f[7],s=f[8]),a.useEffect(l,s),f[9]!==N||f[10]!==g||f[11]!==j||f[12]!==h||f[13]!==k?(u=()=>{if(!h)return;if(!g||!w.current){B.current=null;return}let{joinUrl:e,gameSlug:t}=g;if(!t||j(E.current)||!k(t,e,w.current))return;let n=JSON.stringify(g);if(B.current===n)return;B.current=n;let o=z.current?.username||"";N({message:(0,i.jsx)(b.x6,{id:"friends.popup.friendJoinedYourLobby.text",values:{username:(0,i.jsx)("span",{style:{fontWeight:700},children:o})}}),icon:(0,i.jsx)("span",{children:"\uD83D\uDE4C"})})},d=[N,g,j,k,h],f[9]=N,f[10]=g,f[11]=j,f[12]=h,f[13]=k,f[14]=u,f[15]=d):(u=f[14],d=f[15]),a.useEffect(u,d),null};function ee(e){return e.id}let et=()=>{let e,t;let n=(0,o.c)(7),{settings:c}=x.Qg();r.gE();let l=r.l$(!0),s=c?.notificationPreferences?.interactiveNotifications!==!1;if(n[0]!==s||n[1]!==l){let t;n[3]!==s?(t=e=>{let t=e.privacy?.shareLiveGameActivity??!0;return(0,i.jsxs)(a.Fragment,{children:[s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(K,{userId:e.id,sharesLiveGameActivity:t}),(0,i.jsx)(H,{userId:e.id,sharesLiveGameActivity:t})]}),(0,i.jsx)(J,{friendId:e.id,sharesLiveGameActivity:t},e.id)]},e.id)},n[3]=s,n[4]=t):t=n[4],e=l.map(t),n[0]=s,n[1]=l,n[2]=e}else e=n[2];return n[5]!==e?(t=(0,i.jsx)(i.Fragment,{children:e}),n[5]=e,n[6]=t):t=n[6],t},en=()=>{let e;let t=(0,o.c)(1),{user:n}=a.useContext(U.R);return n?(t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(et,{}),t[0]=e):e=t[0],e):null},ei=()=>{let e;let t=(0,o.c)(1);return r.$v(!0),t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)(N,{children:[(0,i.jsx)(W,{}),(0,i.jsx)(en,{})]}),t[0]=e):e=t[0],e}},79099:(e,t,n)=>{"use strict";n.d(t,{OA:()=>d,bi:()=>s,jx:()=>u});var i=n(16522),o=n(96540),a=n(99165),r=n(29569),c=n(75610);function l(e){let t=new URL(e);t.searchParams.delete(a.w2);let n=t.pathname.split("/").filter(Boolean)[1];return(0,c.jz)().forEach(e=>t.searchParams.delete(e)),n+"?"+t.searchParams.toString()}let s=()=>{let e;let t=(0,i.c)(2),{routeHelper:n}=(0,o.useContext)(r.A);return t[0]!==n?(e=(e,t,i)=>{let o=e?n.localizedJoinUrl(e,t).as:t,a=e?n.localizedJoinUrl(e,i).as:i;return l(o)===l(a)},t[0]=n,t[1]=e):e=t[1],e};function u(){let e;let t=(0,i.c)(2),n=s();return t[0]!==n?(e=(e,t)=>{let i=e.gameStatus?.gameSlug;return!!i&&!!t&&!!e.gameStatus.joinUrl&&n(i,e.gameStatus.joinUrl,t)},t[0]=n,t[1]=e):e=t[1],e}function d(e,t){let n;let o=(0,i.c)(10),a=u();if(!t){let t,n;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],o[0]=t):t=o[0],o[1]!==e?(n=[t,e],o[1]=e,o[2]=n):n=o[2],n}if(o[3]!==a||o[4]!==t||o[5]!==e){let i;o[7]!==a||o[8]!==t?(i=(e,n)=>(e[a(n,t)?0:1].push(n),e),o[7]=a,o[8]=t,o[9]=i):i=o[9],n=e.reduce(i,[[],[]]),o[3]=a,o[4]=t,o[5]=e,o[6]=n}else n=o[6];return n}},65326:e=>{e.exports={czyButton:"CalmNotification_czyButton__P6qsu","czyButton--contained--purple":"CalmNotification_czyButton--contained--purple__VZHrb","czyButton--contained--white":"CalmNotification_czyButton--contained--white___QhtD","czyButton--contained--grey":"CalmNotification_czyButton--contained--grey__odXR6","czyButton--contained--alert":"CalmNotification_czyButton--contained--alert__XUrsC","czyButton--contained--success":"CalmNotification_czyButton--contained--success__T4Acw","czyButton--contained--black":"CalmNotification_czyButton--contained--black__AGof3","czyButton--contained--green-gradient":"CalmNotification_czyButton--contained--green-gradient__0F_KY","czyButton--contained--animated-green-gradient":"CalmNotification_czyButton--contained--animated-green-gradient__ro7Uj","scroll-gradient":"CalmNotification_scroll-gradient___tbrh","czyButton--outlined--purple":"CalmNotification_czyButton--outlined--purple__idjJ6","czyButton--link--purple":"CalmNotification_czyButton--link--purple__O6n18","czyButton--outlined--white":"CalmNotification_czyButton--outlined--white__1go_N","czyButton--link--white":"CalmNotification_czyButton--link--white__fdII0","czyButton--outlined--grey":"CalmNotification_czyButton--outlined--grey__pDulv","czyButton--link--grey":"CalmNotification_czyButton--link--grey__3bNw9","czyButton--outlined--alert":"CalmNotification_czyButton--outlined--alert__2EZz0","czyButton--link--alert":"CalmNotification_czyButton--link--alert__UM6kd","czyButton--outlined--success":"CalmNotification_czyButton--outlined--success__y1p9c","czyButton--link--success":"CalmNotification_czyButton--link--success__Rw08z","czyButton--outlined":"CalmNotification_czyButton--outlined__opLO0","czyButton--disabled":"CalmNotification_czyButton--disabled__dK9RC","czyButton--height50":"CalmNotification_czyButton--height50__6QZUL","czyButton--height34":"CalmNotification_czyButton--height34__pidZE","czyButton--fullWidth":"CalmNotification_czyButton--fullWidth__XDiO9","czyButton--headerIcon":"CalmNotification_czyButton--headerIcon__Au7Kg","czyButton--headerIcon--desktop":"CalmNotification_czyButton--headerIcon--desktop__ACA6B","czyButton--headerIcon--mobile":"CalmNotification_czyButton--headerIcon--mobile___n7Hd",snackbarContent:"CalmNotification_snackbarContent__8u2U5",icon:"CalmNotification_icon__Irf9C",message:"CalmNotification_message__CKUda"}},35196:e=>{e.exports={czyButton:"CoolNotification_czyButton__akOcV","czyButton--contained--purple":"CoolNotification_czyButton--contained--purple__SOP4p","czyButton--contained--white":"CoolNotification_czyButton--contained--white__UOmpD","czyButton--contained--grey":"CoolNotification_czyButton--contained--grey__FDu6F","czyButton--contained--alert":"CoolNotification_czyButton--contained--alert__4VG3u","czyButton--contained--success":"CoolNotification_czyButton--contained--success__NQrEV","czyButton--contained--black":"CoolNotification_czyButton--contained--black__fV0NF","czyButton--contained--green-gradient":"CoolNotification_czyButton--contained--green-gradient__OOpKk","czyButton--contained--animated-green-gradient":"CoolNotification_czyButton--contained--animated-green-gradient__O7deK","scroll-gradient":"CoolNotification_scroll-gradient__yafEa","czyButton--outlined--purple":"CoolNotification_czyButton--outlined--purple__tuk3P","czyButton--link--purple":"CoolNotification_czyButton--link--purple__EYC_3","czyButton--outlined--white":"CoolNotification_czyButton--outlined--white__TGfO9","czyButton--link--white":"CoolNotification_czyButton--link--white__SX_AH","czyButton--outlined--grey":"CoolNotification_czyButton--outlined--grey__BkFft","czyButton--link--grey":"CoolNotification_czyButton--link--grey__y2Qff","czyButton--outlined--alert":"CoolNotification_czyButton--outlined--alert__UdmfD","czyButton--link--alert":"CoolNotification_czyButton--link--alert__JivAY","czyButton--outlined--success":"CoolNotification_czyButton--outlined--success__LBQNh","czyButton--link--success":"CoolNotification_czyButton--link--success__2He8L","czyButton--outlined":"CoolNotification_czyButton--outlined__8hfCs","czyButton--disabled":"CoolNotification_czyButton--disabled__uYjsD","czyButton--height50":"CoolNotification_czyButton--height50__cUULP","czyButton--height34":"CoolNotification_czyButton--height34__sBvQs","czyButton--fullWidth":"CoolNotification_czyButton--fullWidth__NIZs5","czyButton--headerIcon":"CoolNotification_czyButton--headerIcon__P_reN","czyButton--headerIcon--desktop":"CoolNotification_czyButton--headerIcon--desktop__pruev","czyButton--headerIcon--mobile":"CoolNotification_czyButton--headerIcon--mobile__T6Ttr",snackbarContent:"CoolNotification_snackbarContent__s9xm7",closeContainer:"CoolNotification_closeContainer__xCB9P",avatarContainer:"CoolNotification_avatarContainer___Lm22",avatar:"CoolNotification_avatar__akmA1",circle:"CoolNotification_circle__zRyJF",square:"CoolNotification_square__1TFKT",textContainer:"CoolNotification_textContainer__Blkjj",username:"CoolNotification_username__Y0czT",message:"CoolNotification_message__oGvWA",buttonContainer:"CoolNotification_buttonContainer__ivWc5",countdownBar:"CoolNotification_countdownBar__ayBe1"}}}]);