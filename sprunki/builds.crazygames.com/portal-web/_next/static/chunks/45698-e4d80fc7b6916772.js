try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7b0f148a-b086-4027-98e2-c82188a46d05",e._sentryDebugIdIdentifier="sentry-dbid-7b0f148a-b086-4027-98e2-c82188a46d05")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:crazygames-portal":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45698],{45698:(e,t,a)=>{a.r(t),a.d(t,{LOCAL_BOOT_URL:()=>T,default:()=>B});var i=a(96540),n=a(26186),r=a(25911),o=a(16546),s=a(83633),l=a(79417),c=a(36490),u=a(13660),d=a(27360),f=a(39788),h=a(76490),p=a(53652),w=a(40241),g=a(70897),y=a(27102),b=a(4743),m=a(17061),v=a(21763),I=a(3683),_=a(86715),A=a(20795),k=a(97305),L=a(82964),R=a(12896),P=a(64877),E=a(44870),S=a(32705),U=a(88284);let D=new Set(Object.values(U.Ec).map(e=>e.pathLocale));function C(e,t,a){try{let i=new URL(e);if(t===a)return i.pathname+i.search+i.hash;let n=U.Ec[t].pathLocale,r=i.pathname.split("/").filter(g.y0);if(r.length>0&&D.has(r[0])&&r.shift(),r.length>0&&(0,g.y0)(r[0])){let e=function(e,t,a){let i;let n=(0,P.getLocalRouteProviderData)(a);for(let t of E.c){let a=n[t];if(e===a?.new){i=t;break}}if(!(0,R.isDefined)(i))return;let r=(0,P.getLocalRouteProviderData)(t)[i];if("tag"!==i&&"category"!==i)return r?.new}(r[0],t,a);(0,R.isDefined)(e)?r[0]=e:r.splice(0,r.length)}(0,R.isDefined)(n)&&r.unshift(n);let o=r.join("/");return"/"+o+i.search+i.hash}catch(t){return console.error("Failed to parse the provided URL:",t),e}}var O=a(16439);let T="https://localhost/index.html";async function M(){let e=await d.y.getApplicationLocales(),t=e?.locales?.[0];if(!(0,g.y0)(t)){let e=await d.y.getSystemLocales();t=e?.locales?.[0]}let a=t?.split("-")[0].split("_")[0];return Object.keys(U.Ec).find(e=>e.split("-")[0]===a)??w.Xn}async function q(){return new Promise(async e=>{let t=await n.q.addListener("appStateChange",async a=>{a.isActive&&(await t.remove(),e())});(await n.q.getState()).isActive&&(await t.remove(),e())})}let j=.1>Math.random();function B(e){let{children:t}=e,{i18n:a}=(0,b.uB)(),d=(0,i.useRef)(!1),w=(0,_.useRouter)(),{triggerLogin:g,setLoading:R}=(0,i.useContext)(A.c),P=(0,O.x)(),E=async()=>{if(!o.Ii.isNativePlatform())return;let e=await n.q.getInfo();j&&m.Ts({dsn:function(){throw Error("No Sentry Dsn found for Render Type web")}(),release:`${e.id}@${e.version}`,dist:e.build}),u.n(),await u.P.enable({config:{}});let t=await M(),i=(0,S.I_)(window.location.hostname,window.location.pathname);if(i!==t){document.location=C(window.location.href,t,i);return}async function d(e){let t=new URL(e).searchParams.get("token")??"";if(""===t){R(!1);return}await k.firebaseAuth.authStateReady();let a=await (0,y.p)(k.firebaseAuth,t);await g(a),R(!1)}async function b(e){if(await k.firebaseAuth.authStateReady(),null===k.firebaseAuth.currentUser)try{if("android"===o.Ii.getPlatform()&&o.Ii.isPluginAvailable("Browser"))R(!0),await r.P.open({url:`${e}/app-login`});else if("ios"===o.Ii.getPlatform()&&o.Ii.isPluginAvailable("IosAuthSession")){R(!0),await q();let t=await I.C.start({authUrl:`${e}/app-login`,callbackScheme:"crazygames"});await d(t.callbackUrl)}}catch{R(!1)}}o.Ii.isPluginAvailable("AppShortcuts")&&await f.T.addListener("click",async e=>{let{shortcutId:t}=e;"shortcut_feedback"===t?await w.push("/?contact=1"):"shortcut_play"===t&&await w.push("/")}),await n.q.addListener("appUrlOpen",async e=>{if(console.info("AppUrlOpen",e),e.url.includes("login?token=")){await d(e.url);return}let a=new URL(e.url).searchParams.get("adj_deep_link"),i=new URL((a?decodeURIComponent(a):e.url).replace("crazygames://","https://")),n=function(e,t){let a=(0,S.I_)(e.hostname,e.pathname);return C(e.href,t,a)}(i,t);"1"===new URL(n,window.location.origin).searchParams.get("logged_in")&&await b(i.origin),await w.push(n)}),await n.q.addListener("backButton",async e=>{let{canGoBack:t}=e;if(P?.isGameOpenRef?.current){await l.eA.hide();return}t?(await h.Z.unlock(),await l.eA.show(),await p.r.show(),await u.P.enable({config:{}}),w.back()):await n.q.exitApp()}),await n.q.addListener("appStateChange",async e=>{e.isActive&&P?.isGameOpenRef?.current&&await l.eA.hide()}),o.Ii.isPluginAvailable("LottieSplashScreen")?v.F.appLoaded():await s.S.hide(),await c.IW.initialize({testingDevices:["fb45b225a6db8eef60e5d8d8dfb968fa"],initializeForTesting:"development"===L.A.Instance.environment});let _=await c.IW.requestConsentInfo();if(_.isConsentFormAvailable&&_.status===c.Oj.REQUIRED&&await c.IW.showConsentForm(),o.Ii.isPluginAvailable("AppShortcuts"))try{await f.T.set({shortcuts:[{id:"shortcut_feedback",title:a._("feedback.appQuickShortcuts.sendFeedback.title"),...!1,androidIcon:"ic_shortcut_envelope",iosIcon:"envelope"},{id:"shortcut_play",title:a._("feedback.appQuickShortcuts.playAgain.title"),...!1,androidIcon:"ic_shortcut_gamecontroller",iosIcon:"gamecontroller"}]})}catch(e){console.error("[App Shortcuts] CRITICAL ERROR setting shortcuts:",e)}};return(0,i.useEffect)(()=>{j&&m.NA("page",w.asPath)},[w.asPath]),(0,i.useEffect)(()=>{d.current||(d.current=!0,E())}),(0,i.useEffect)(()=>{if(!o.Ii.isNativePlatform())return;let e=e=>{},t=async e=>{let t=e.target.closest("a");t&&t.href&&new URL(t.href).hostname!==window.location.hostname&&o.Ii.isPluginAvailable("Browser")&&(e.preventDefault(),await r.P.open({url:t.href}))};return document.addEventListener("click",t),document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",t),document.removeEventListener("click",e,!0)}},[]),t}},70897:(e,t,a)=>{t.y0=function(e){return(0,i.isDefined)(e)&&""!==e.trim()};let i=a(12896)}}]);